{"version":3,"sources":["spy.js","index.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["var isRecording = false\nvar frame = undefined\nvar box = []\nbindListeners()\n\nfunction tick() {\n  \n  isRecording || bindListeners()\n  isRecording = true\n  frame = window.requestAnimationFrame(tick)\n}\n\n// TODO: debounce\nfunction bindListeners() {\n  window.addEventListener('mousemove', e => {\n    console.log(e)\n    box.push(createIntel(e, 'mousemove'))\n  }, true)\n  window.addEventListener('click', e => {\n    box.push(createIntel(e, 'click'))\n  }, true)\n  window.addEventListener('scroll', e => {\n    box.push(createIntel(e, 'scroll'))\n  }, true)\n}\n\nfunction createIntel(event, behavior) {\n  var pkg = {\n    x: event.pageX || null,\n    y: event.pageY || null,\n    offsetX: event.offsetX,\n    offsetY: event.offsetY,\n    scrollX: window.scrollX,\n    scrollY: window.scrollY,\n    target: event.target.getAttribute ? event.target.getAttribute('id') : null,\n    behavior: behavior,\n    ts: Date.now()\n  }\n  return pkg\n}\n\nfunction data() {\n  return box\n}\n\n// TODO: Need a lot of enhancement, like selector and sync layout and setTimeout\nfunction play(cursor, box) {\n  let start = box[0].ts\n  box.forEach(pkg => {\n    setTimeout(() => {\n      if (pkg.behavior === 'scroll') {\n        window.scroll(pkg.scrollX, pkg.scrollY)\n      } else if (pkg.behavior === 'mousemove') {\n        if (pkg.target && document.getElementById(pkg.target)) {\n          cursor.style.left = document.getElementById(pkg.target).pageX + pkg.offsetX\n          cursor.style.top = document.getElementById(pkg.target).pageY + pkg.offsetY\n        } else {\n            cursor.style.left = pkg.x + 'px'\n            cursor.style.top = pkg.y + 'px'\n        }\n        cursor.style.left = pkg.x + 'px'\n        cursor.style.top = pkg.y + 'px'\n      } else if (pkg.behavior === 'click') {\n        if (pkg.target) {\n          var evObj = document.createEvent('Events')\n          evObj.initEvent('click', true, false)\n          document.getElementById(pkg.target).dispatchEvent(evObj)\n        }\n      }\n    }, pkg.ts - start)\n  });\n}\n\nexport { tick, data, play }\n","import { tick, data, play } from './spy.js';\n\nvar pos\nvar preData\ntick();\ndocument.querySelector('#play').addEventListener('click', function(e) {\n  var d = data()\n  play(document.querySelector('#cursor'), d)\n})\ndocument.getElementById('test').addEventListener('click', function() {\n  console.log('success')\n});\n\n"],"sourceRoot":"/source/"}