{"version":3,"sources":["spy.js","index.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["\nvar isRecording = false\nvar rAF = undefined\nvar intelligenceBox = []\nbindListeners()\n\nfunction start() {\n  isRecording = true\n  rAF = window.requestAnimationFrame(moment.bind(this))\n}\n\nfunction moment(ts) {\n  isRecording = true\n\n  rAF = window.requestAnimationFrame(moment.bind(this))\n}\n\nfunction bindListeners() {\n  window.addEventListener('mousemove', e => {\n    if (!isRecording)\n      return\n    intelligenceBox.push(createIntel(e, 'mousemove'))\n  }, true)\n  window.addEventListener('click', e => {\n    console.log(e)\n    if (!isRecording)\n      return\n    intelligenceBox.push(createIntel(e, 'click'))\n  }, true)\n  window.addEventListener('scroll', e => {\n    if (!isRecording)\n      return\n    intelligenceBox.push(createIntel(e, 'scroll'))\n  }, true)\n  // window.addEventListener('beforeunload', e => {\n  //   saveToLocalStorage(export());\n  // });\n}\n\n// Spy.prototype.saveToLocalStorage = function(data) {\n//   var info = {\n//     page: location\n//     intelligences: data\n//   }\n//   localStorage.setItem('spy-data', data);\n// };\n\nfunction createIntel(event, behavior) {\n  var intelligence = {\n    x: event.pageX || null,\n    y: event.pageY || null,\n    scrollX: window.scrollX,\n    scrollY: window.scrollY,\n    target: event.target.getAttribute ? event.target.getAttribute('id') : null,\n    behavior: behavior,\n    ts: Date.now()\n  }\n  return intelligence\n}\n\nfunction exportData() {\n  return intelligenceBox\n}\n\nfunction play(cursor, box) {\n  let start = box[0].ts\n  box.forEach(intelligence => {\n    setTimeout(() => {\n\n      if (intelligence.behavior === 'scroll') {\n        window.scroll(intelligence.scrollX, intelligence.scrollY)\n      } else if (intelligence.behavior === 'mousemove') {\n        cursor.style.left = intelligence.x + 'px'\n        cursor.style.top = intelligence.y + 'px'\n      } else if (intelligence.behavior === 'click') {\n        if (intelligence.target) {\n          var evObj = document.createEvent('Events')\n          evObj.initEvent('click', true, false)\n          document.getElementById(intelligence.target).dispatchEvent(evObj)\n        }\n      }\n    }, intelligence.ts - start)\n  });\n}\n\nexport { start, exportData, play }\n","import { start, exportData, play } from './spy.js';\n\nvar pos\nvar preData\nstart();\ndocument.querySelector('#play').addEventListener('click', function(e) {\n  var data = exportData()\n  play(document.querySelector('#cursor'), data)\n})\ndocument.getElementById('test').addEventListener('click', function() {\n  console.log('success')\n});\n\n"],"sourceRoot":"/source/"}